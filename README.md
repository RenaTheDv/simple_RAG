# simple_RAG - Собранный чат-бот для юридических документов с поддержкой Яндекс GPT

## О проекте
LegalRAG — это интеллектуальный чат-бот для юридической поддержки, основанный на Retrieval-Augmented Generation (RAG).  
Бот использует собственную базу данных юридических документов и справочных материалов, а для генерации ответов — интегрируется с Яндекс GPT (модель yandexgpt-lite).  
Цель проекта — предоставлять качественные и обоснованные ответы на юридические вопросы с ссылками на релевантные источники (статьи и судебные решения).

![Пример работы RAG](src/web/assets/rag_demo.gif)

---

## Технологии

- Python 3.10
- Streamlit в качестве интерфейса
- Yandex Cloud Foundation Models API
- Docker + Docker Compose для контейнеризации
- FAISS для хранения векторного представления текстов из документов (скрипт для подготовки данных прилагается)

## Что подготовить перед запуском

1. **Получить API-ключ Яндекс Cloud**  
   Зарегистрироваться в Яндекс Облаке, создать сервисный аккаунт с доступом к Foundation Models, получить API-ключ (`YANDEX_API_KEY`) и Folder ID (`YANDEX_FOLDER_ID`).

2. **Создать файл `.env` с переменными окружения**  
   В репозитории есть пример `.env.example`. Заполните в нем:
   YANDEX_API_KEY=your_yandex_api_key_here
   YANDEX_FOLDER_ID=your_folder_id_here
   OPENAI_API_KEY=your_openai_key_here (если есть GPT API)
   В будущем есть вариант реализовать .env и хранить его только локально, но в данном случае для примера был создан .env.example. Если изменить - поменяйте пути в каждом файле, который на него ссылается.

4. **Подготовить данные**  
   Необходимо создать директории `data/raw`, `data/processed`, `data/vector_db`. Скрипт `run.sh` создаст их автоматически.

## Как запустить
### Локально с виртуальным окружением:
```bash
chmod +x run.sh
./run.sh
```
Скрипт:
- Создаст и активирует виртуальное окружение
- Установит зависимости из requirements.txt
- Создаст необходимые папки
- Загрузит переменные окружения из .env
- Запустить Streamlit-приложение на http://localhost:8501 для тестирования

### Через Docker + Docker Compose (необходимо наличие docker + docker compose в окружении)
1. Скопировать .env.example в .env и заполнить переменные окружения (YANDEX_API_KEY, YANDEX_FOLDER_ID и опционально OPENAI_API_KEY)
2. Собрать и запустить контейнер:
```bash
docker compose up --build
```
3. Открыть в браузере http://localhost:8501

## Как добавить свои документы
В данный момент реализован ручной парсер. В будущем есть возможность расширить эту функцию до автоматизма.
Для работы с новыми, не представленными документами, следуйте следующим шагам:
1. **Добавьте новые документы**  
   Поместите файлы с новыми документами в папку:  
   `simple_RAG/data/raw`

2. **Запустите парсер**  
   Для обработки новых документов и извлечения данных выполните скрипт:  
   ```bash
   python simple_RAG/src/data_processing/parser.py
   ```
3. **Обновите векторную базу**
   После парсинга нужно обновить векторную базу, чтобы новые данные стали доступны для поиска:
   ```bash
   python simple_RAG/src/data_processing/vector_db.py
   ```
4. **Запускайте приложение**
   После успешного обновления данных и векторной базы можно запускать веб-приложение или другие части проекта по обычной схеме.
   
